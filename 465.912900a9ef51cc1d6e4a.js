(self.webpackChunklibrary_academic=self.webpackChunklibrary_academic||[]).push([[465],{8465:(e,i,t)=>{"use strict";t.r(i),t.d(i,{LoginModule:()=>Z});var o=t(8583),r=t(2305),n=t(3679),a=t(5319),s=t(7716),c=t(5830),g=t(5261),d=t(2925),l=t(3738),u=t(8295),m=t(9983),p=t(1095),h=t(6627);function b(e,i){if(1&e&&(s.TgZ(0,"mat-error"),s._uU(1),s.qZA()),2&e){const e=s.oxw();s.xp6(1),s.hij(" ",e.getErrorMessage("username")," ")}}function f(e,i){if(1&e&&(s.TgZ(0,"mat-error"),s._uU(1),s.qZA()),2&e){const e=s.oxw();s.xp6(1),s.hij(" ",e.getErrorMessage("password")," ")}}const v=[{path:"",component:(()=>{class e{constructor(e,i,t,o){this.authService=e,this.fb=i,this.router=t,this.cookieService=o,this.subscription=new a.w,this.hide=!0,this.isValidDNI=/^\d+$/,this.loginForm=this.fb.group({username:["",[n.kI.required,n.kI.minLength(10),n.kI.maxLength(10),n.kI.pattern(this.isValidDNI)]],password:["",[n.kI.required,n.kI.minLength(10)]]})}ngOnInit(){}isLogin(){this.subscription.add(this.authService.login(this.loginForm.value).subscribe(e=>{e&&(this.authService.saveToken(e.token,e.user),this.cookieService.set("token_access",e.token,1,"/"),this.router.navigate(["/"]))}))}ngOnDestroy(){this.subscription.unsubscribe()}getErrorMessage(e){var i,t,o,r,n,a,s;let c="";return(null===(t=null===(i=this.loginForm.get(e))||void 0===i?void 0:i.errors)||void 0===t?void 0:t.required)?c="Campo requerido":(null===(o=this.loginForm.get(e))||void 0===o?void 0:o.hasError("pattern"))||(null===(r=this.loginForm.get(e))||void 0===r?void 0:r.hasError("maxlength"))?c="Cedula incorrecta":(null===(n=this.loginForm.get(e))||void 0===n?void 0:n.hasError("minlength"))&&(c=`Se requieren minimo ${null===(s=null===(a=this.loginForm.get(e))||void 0===a?void 0:a.errors)||void 0===s?void 0:s.minlength.requiredLength} caracteres`),c}isValidField(e){var i,t,o;return((null===(i=this.loginForm.get(e))||void 0===i?void 0:i.touched)||(null===(t=this.loginForm.get(e))||void 0===t?void 0:t.dirty))&&!(null===(o=this.loginForm.get(e))||void 0===o?void 0:o.valid)||!1}}return e.\u0275fac=function(i){return new(i||e)(s.Y36(c.s),s.Y36(n.qu),s.Y36(r.F0),s.Y36(g.N))},e.\u0275cmp=s.Xpm({type:e,selectors:[["app-login"]],decls:21,vars:8,consts:[[1,"login-form"],[1,"animate__animated","animate__backInDown"],[1,"animate__animated","animate__rubberBand","animate__delay-3s","animate__repeat-2"],["src","../../../../assets/images/istpm.png","alt","",1,"image"],[3,"formGroup"],[1,"full-width-input"],["type","text","formControlName","username","matInput","","placeholder","Usuario","required",""],[4,"ngIf"],[1,"full-width-input","separator"],["formControlName","password","matInput","","placeholder","Contrase\xf1a","required","",3,"type"],["mat-icon-button","","matSuffix","",3,"click"],["type","submit","mat-raised-button","","color","primary",1,"separator",3,"disabled","click"],["href","mailto:richardjimenez.9641@gmail.com",1,"hover"]],template:function(e,i){1&e&&(s._UZ(0,"app-spinner"),s.TgZ(1,"div",0),s.TgZ(2,"mat-card",1),s.TgZ(3,"mat-card-content"),s.TgZ(4,"h1",2),s._uU(5,"Inicie Sesi\xf3n"),s.qZA(),s._UZ(6,"img",3),s.TgZ(7,"form",4),s.TgZ(8,"mat-form-field",5),s._UZ(9,"input",6),s.YNc(10,b,2,1,"mat-error",7),s.qZA(),s.TgZ(11,"mat-form-field",8),s._UZ(12,"input",9),s.TgZ(13,"button",10),s.NdJ("click",function(){return i.hide=!i.hide}),s.TgZ(14,"mat-icon"),s._uU(15),s.qZA(),s.qZA(),s.YNc(16,f,2,1,"mat-error",7),s.qZA(),s.TgZ(17,"button",11),s.NdJ("click",function(){return i.isLogin()}),s._uU(18,"Continuar"),s.qZA(),s.TgZ(19,"a",12),s._uU(20,"Olvide mis credenciales"),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.qZA()),2&e&&(s.xp6(7),s.Q6J("formGroup",i.loginForm),s.xp6(3),s.Q6J("ngIf",i.isValidField("username")),s.xp6(2),s.Q6J("type",i.hide?"password":"text"),s.xp6(1),s.uIk("aria-label","Hide password")("aria-pressed",i.hide),s.xp6(2),s.Oqu(i.hide?"visibility_off":"visibility"),s.xp6(1),s.Q6J("ngIf",i.isValidField("password")),s.xp6(1),s.Q6J("disabled",i.loginForm.invalid))},directives:[d.O,l.a8,l.dn,n._Y,n.JL,n.sg,u.KE,n.Fj,m.Nt,n.JJ,n.u,n.Q7,o.O5,p.lW,u.R9,h.Hw,u.TO],styles:['.login-form[_ngcontent-%COMP%]{padding:3rem 1rem;background-image:url(b.e1c50fa70c52d17c8489.jpg);background-image:no-repeat;background-image:fixed;text-align:center;background-image:top;background-size:cover;height:100vh;position:relative}.login-form[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;bottom:0;left:0;right:0;background-color:#000000bf}mat-card[_ngcontent-%COMP%]{max-width:300px;margin:5rem auto;text-align:center;height:350px}.full-width-input[_ngcontent-%COMP%], button[_ngcontent-%COMP%]{width:100%}.separator[_ngcontent-%COMP%]{margin-bottom:1rem}.hover[_ngcontent-%COMP%]{font-size:10px}.hover[_ngcontent-%COMP%]:hover{color:brown;font-size:13px}.image[_ngcontent-%COMP%]{width:60px;margin-bottom:14px}@media(max-width:599px){.login-form[_ngcontent-%COMP%]{background-image:url(b.e1c50fa70c52d17c8489.jpg);background-image:no-repeat;background-image:fixed;background-image:top;background-size:cover}.login-form[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;bottom:0;left:0;right:0;background-color:#000}}@media(max-width:578px){.login-form[_ngcontent-%COMP%]{background-image:url(b.e1c50fa70c52d17c8489.jpg);background-image:no-repeat;background-image:fixed;background-image:top;background-size:cover}.login-form[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;bottom:0;left:0;right:0;background-color:#000}}']}),e})()}];let k=(()=>{class e{}return e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=s.oAB({type:e}),e.\u0275inj=s.cJS({imports:[[r.Bz.forChild(v)],r.Bz]}),e})();var _=t(378),x=t(8721);let Z=(()=>{class e{}return e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=s.oAB({type:e}),e.\u0275inj=s.cJS({imports:[[o.ez,k,_.q,n.UX,x.F]]}),e})()}}]);