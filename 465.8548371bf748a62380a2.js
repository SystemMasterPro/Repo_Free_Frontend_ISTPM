(self.webpackChunklibrary_academic=self.webpackChunklibrary_academic||[]).push([[465],{8465:(e,t,i)=>{"use strict";i.r(t),i.d(t,{LoginModule:()=>_});var o=i(8583),r=i(2305),n=i(3679),a=i(5319),s=i(7716),c=i(5830),g=i(5261),d=i(3738),l=i(8295),u=i(9983),m=i(1095),p=i(6627);function h(e,t){if(1&e&&(s.TgZ(0,"mat-error"),s._uU(1),s.qZA()),2&e){const e=s.oxw();s.xp6(1),s.hij(" ",e.getErrorMessage("username")," ")}}function b(e,t){if(1&e&&(s.TgZ(0,"mat-error"),s._uU(1),s.qZA()),2&e){const e=s.oxw();s.xp6(1),s.hij(" ",e.getErrorMessage("password")," ")}}const f=[{path:"",component:(()=>{class e{constructor(e,t,i,o){this.authService=e,this.fb=t,this.router=i,this.cookieService=o,this.subscription=new a.w,this.hide=!0,this.isValidDNI=/^\d+$/,this.loginForm=this.fb.group({username:["",[n.kI.required,n.kI.minLength(10),n.kI.maxLength(10),n.kI.pattern(this.isValidDNI)]],password:["",[n.kI.required,n.kI.minLength(10)]]})}ngOnInit(){}isLogin(){this.subscription.add(this.authService.login(this.loginForm.value).subscribe(e=>{e&&(this.authService.saveToken(e.token,e.user),this.cookieService.set("token_access",e.token,1,"/"),this.router.navigate(["/"]))}))}ngOnDestroy(){this.subscription.unsubscribe()}getErrorMessage(e){var t,i,o,r,n,a,s;let c="";return(null===(i=null===(t=this.loginForm.get(e))||void 0===t?void 0:t.errors)||void 0===i?void 0:i.required)?c="Campo requerido":(null===(o=this.loginForm.get(e))||void 0===o?void 0:o.hasError("pattern"))||(null===(r=this.loginForm.get(e))||void 0===r?void 0:r.hasError("maxlength"))?c="Cedula incorrecta":(null===(n=this.loginForm.get(e))||void 0===n?void 0:n.hasError("minlength"))&&(c=`Se requieren minimo ${null===(s=null===(a=this.loginForm.get(e))||void 0===a?void 0:a.errors)||void 0===s?void 0:s.minlength.requiredLength} caracteres`),c}isValidField(e){var t,i,o;return((null===(t=this.loginForm.get(e))||void 0===t?void 0:t.touched)||(null===(i=this.loginForm.get(e))||void 0===i?void 0:i.dirty))&&!(null===(o=this.loginForm.get(e))||void 0===o?void 0:o.valid)||!1}}return e.\u0275fac=function(t){return new(t||e)(s.Y36(c.s),s.Y36(n.qu),s.Y36(r.F0),s.Y36(g.N))},e.\u0275cmp=s.Xpm({type:e,selectors:[["app-login"]],decls:20,vars:8,consts:[[1,"login-form"],[1,"animate__animated","animate__backInDown"],[1,"animate__animated","animate__rubberBand","animate__delay-3s","animate__repeat-2"],["src","../../../../assets/images/istpm.png","alt","",1,"image"],[3,"formGroup"],[1,"full-width-input"],["type","text","formControlName","username","matInput","","placeholder","Usuario","required",""],[4,"ngIf"],[1,"full-width-input","separator"],["formControlName","password","matInput","","placeholder","Contrase\xf1a","required","",3,"type"],["mat-icon-button","","matSuffix","",3,"click"],["type","submit","mat-raised-button","","color","primary",1,"separator",3,"disabled","click"],["href","mailto:richardjimenez.9641@gmail.com",1,"hover"]],template:function(e,t){1&e&&(s.TgZ(0,"div",0),s.TgZ(1,"mat-card",1),s.TgZ(2,"mat-card-content"),s.TgZ(3,"h1",2),s._uU(4,"Inicie Sesi\xf3n"),s.qZA(),s._UZ(5,"img",3),s.TgZ(6,"form",4),s.TgZ(7,"mat-form-field",5),s._UZ(8,"input",6),s.YNc(9,h,2,1,"mat-error",7),s.qZA(),s.TgZ(10,"mat-form-field",8),s._UZ(11,"input",9),s.TgZ(12,"button",10),s.NdJ("click",function(){return t.hide=!t.hide}),s.TgZ(13,"mat-icon"),s._uU(14),s.qZA(),s.qZA(),s.YNc(15,b,2,1,"mat-error",7),s.qZA(),s.TgZ(16,"button",11),s.NdJ("click",function(){return t.isLogin()}),s._uU(17,"Continuar"),s.qZA(),s.TgZ(18,"a",12),s._uU(19,"Olvide mis credenciales"),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.qZA()),2&e&&(s.xp6(6),s.Q6J("formGroup",t.loginForm),s.xp6(3),s.Q6J("ngIf",t.isValidField("username")),s.xp6(2),s.Q6J("type",t.hide?"password":"text"),s.xp6(1),s.uIk("aria-label","Hide password")("aria-pressed",t.hide),s.xp6(2),s.Oqu(t.hide?"visibility_off":"visibility"),s.xp6(1),s.Q6J("ngIf",t.isValidField("password")),s.xp6(1),s.Q6J("disabled",t.loginForm.invalid))},directives:[d.a8,d.dn,n._Y,n.JL,n.sg,l.KE,n.Fj,u.Nt,n.JJ,n.u,n.Q7,o.O5,m.lW,l.R9,p.Hw,l.TO],styles:['.login-form[_ngcontent-%COMP%]{padding:3rem 1rem;background-image:url(b.e1c50fa70c52d17c8489.jpg);background-image:no-repeat;background-image:fixed;text-align:center;background-image:top;background-size:cover;height:100vh;position:relative}.login-form[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;bottom:0;left:0;right:0;background-color:#000000bf}mat-card[_ngcontent-%COMP%]{max-width:300px;margin:5rem auto;text-align:center;height:350px}.full-width-input[_ngcontent-%COMP%], button[_ngcontent-%COMP%]{width:100%}.separator[_ngcontent-%COMP%]{margin-bottom:1rem}.hover[_ngcontent-%COMP%]{font-size:10px}.hover[_ngcontent-%COMP%]:hover{color:brown;font-size:13px}.image[_ngcontent-%COMP%]{width:60px;margin-bottom:14px}@media(max-width:599px){.login-form[_ngcontent-%COMP%]{background-image:url(b.e1c50fa70c52d17c8489.jpg);background-image:no-repeat;background-image:fixed;background-image:top;background-size:cover}.login-form[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;bottom:0;left:0;right:0;background-color:#000}}@media(max-width:578px){.login-form[_ngcontent-%COMP%]{background-image:url(b.e1c50fa70c52d17c8489.jpg);background-image:no-repeat;background-image:fixed;background-image:top;background-size:cover}.login-form[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;bottom:0;left:0;right:0;background-color:#000}}']}),e})()}];let v=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=s.oAB({type:e}),e.\u0275inj=s.cJS({imports:[[r.Bz.forChild(f)],r.Bz]}),e})();var k=i(378);let _=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=s.oAB({type:e}),e.\u0275inj=s.cJS({imports:[[o.ez,v,k.q,n.UX]]}),e})()}}]);